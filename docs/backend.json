{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user.",
          "format": "uuid"
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "displayName": {
          "type": "string",
          "description": "User's display name."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the user account was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "email",
        "displayName",
        "createdAt"
      ]
    },
    "Auction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Auction",
      "type": "object",
      "description": "Represents an IPL auction.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the auction."
        },
        "name": {
          "type": "string",
          "description": "Name of the auction."
        },
        "locked": {
          "type": "boolean",
          "description": "Indicates if the final order is locked."
        },
        "generatedAt": {
          "type": "string",
          "description": "Timestamp of when the auction order was generated.",
          "format": "date-time"
        },
        "pinHash": {
          "type": "string",
          "description": "SHA-256 hash of the PIN used to lock the auction."
        },
        "ownerId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Auction). The user who created the auction."
        }
      },
      "required": [
        "id",
        "name",
        "locked",
        "generatedAt",
        "pinHash",
        "ownerId"
      ]
    },
    "Player": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Player",
      "type": "object",
      "description": "Represents a player in the auction.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the player."
        },
        "name": {
          "type": "string",
          "description": "Name of the player."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "AuctionOrder": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AuctionOrder",
      "type": "object",
      "description": "Represents the order of players in the auction.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the auction order."
        },
        "auctionId": {
          "type": "string",
          "description": "Reference to Auction. (Relationship: Auction 1:N AuctionOrder)"
        },
        "playerId": {
          "type": "string",
          "description": "Reference to Player. (Relationship: Player 1:N AuctionOrder)"
        },
        "orderNumber": {
          "type": "number",
          "description": "The order number of the player in the auction."
        }
      },
      "required": [
        "id",
        "auctionId",
        "playerId",
        "orderNumber"
      ]
    },
    "Set": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Set",
      "type": "object",
      "description": "Represents a set of players in the auction.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the set."
        },
        "name": {
          "type": "string",
          "description": "Name of the set."
        },
        "auctionId": {
          "type": "string",
          "description": "Reference to Auction. (Relationship: Auction 1:N Set)"
        },
        "playerIds": {
          "type": "array",
          "description": "References to Players. (Relationship: Set N:N Player)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "auctionId",
        "playerIds"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/auctions/{auctionId}",
        "definition": {
          "entityName": "Auction",
          "schema": {
            "$ref": "#/backend/entities/Auction"
          },
          "description": "Stores auction details, including locked status, generation timestamp, and PIN hash. The `auctionId` is fixed as 'default'.",
          "params": [
            {
              "name": "auctionId",
              "description": "The ID of the auction. This will always be 'default'."
            }
          ]
        }
      },
      {
        "path": "/auctions/{auctionId}/order/{orderNumber}",
        "definition": {
          "entityName": "AuctionOrder",
          "schema": {
            "$ref": "#/backend/entities/AuctionOrder"
          },
          "description": "Stores the final auction order, with each document representing a player's order number.",
          "params": [
            {
              "name": "auctionId",
              "description": "The ID of the auction. This will always be 'default'."
            },
            {
              "name": "orderNumber",
              "description": "The order number of the player in the auction. Used as the document ID."
            }
          ]
        }
      }
    ],
    "reasoning": "Given the requirements of the IPL Auction Order Generator application, the Firestore structure is designed with simplicity and the absence of authentication in mind. Since authentication is not needed and the application mainly involves generating and storing a final auction order, the structure focuses on storing the auction details and the final order in a straightforward manner.\n\nThe core principle applied here is **Structural Segregation (Homogeneous Security Posture)**. All data related to the auction is stored under a single `/auction/default` document and its subcollections, ensuring consistent security rules can be applied.  Since there is no authentication, data is effectively public.\n\nSpecifically:\n\n*   `/auctions/{auctionId}` stores the overall auction data, including the locked status, generation timestamp, and PIN hash. The `{auctionId}` is hardcoded to `default` as per the requirements.  The `pinHash` allows rules to check its value on write.\n*   `/auctions/{auctionId}/order/{orderNumber}` stores the final auction order. Each document contains the player's name and their order number. Using the order number as the document ID ensures easy retrieval in the correct order.  No denormalization is required as there is no complex authorization and all data is effectively public and read-only after being 'locked'.\n\nThis structure supports the required QAPs:\n\n*   **Secure Writes (Write if pinHash matches):** The Firestore rules check the `pinHash` during writes to lock the auction order."
  }
}